#include <OctoWS2811.h>

const int ledsPerStrip = 256;

DMAMEM int displayMemory[ledsPerStrip*6];
int drawingMemory[ledsPerStrip*6];

OctoWS2811 leds(ledsPerStrip, displayMemory, drawingMemory, WS2811_GRB | WS2811_800kHz);

const unsigned char ovh[16][32] = {
  { 0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0xd5,0xff,0xff,0xff,0xff,0xff,0xff,0xe3,0x0a,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,  },
  { 0x00,0x00,0x00,0x06,0x96,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x6d,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x5a,0x00,0x00,0x00,0x00,0x00,0x96,0x06,0x00,0x00,0x00,  },
  { 0x00,0x00,0x00,0x58,0xff,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x12,0xed,0xff,0xff,0xff,0xff,0xff,0xff,0xc6,0x00,0x00,0x00,0x00,0x00,0x3f,0xff,0x58,0x00,0x00,0x00,  },
  { 0x00,0x00,0x00,0xc0,0xff,0xd0,0x02,0x00,0x00,0x00,0x00,0x00,0x94,0xff,0xff,0xff,0xff,0xff,0xff,0xfe,0x35,0x00,0x00,0x00,0x00,0x02,0xcf,0xff,0xc0,0x00,0x00,0x00,  },
  { 0x00,0x00,0x09,0xfe,0xff,0xff,0x67,0x00,0x00,0x00,0x00,0x2b,0xfc,0xff,0xff,0xff,0xff,0xff,0xff,0xa0,0x00,0x00,0x00,0x00,0x00,0x65,0xff,0xff,0xfe,0x09,0x00,0x00,  },
  { 0x00,0x00,0x2a,0xff,0xff,0xff,0xea,0x0f,0x00,0x00,0x00,0xbb,0xff,0xff,0xff,0xff,0xff,0xff,0xf3,0x19,0x00,0x07,0x20,0x20,0x27,0xe9,0xff,0xff,0xff,0x2a,0x00,0x00,  },
  { 0x00,0x00,0x4d,0xff,0xff,0xff,0xff,0x8e,0x00,0x00,0x4e,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x79,0x00,0x00,0x8c,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x4d,0x00,0x00,  },
  { 0x00,0x00,0x66,0xff,0xff,0xff,0xff,0xfa,0x27,0x06,0xdb,0xff,0xff,0xff,0xff,0xff,0xff,0xde,0x07,0x00,0x26,0xfa,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x66,0x00,0x00,  },
  { 0x00,0x00,0x42,0xff,0xff,0xff,0xff,0xff,0xb5,0x75,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x52,0x00,0x00,0xb4,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x42,0x00,0x00,  },
  { 0x00,0x00,0x15,0xff,0xff,0xff,0xff,0xff,0xff,0xf8,0xff,0xff,0xff,0xff,0xff,0xff,0xbe,0x00,0x00,0x49,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x15,0x00,0x00,  },
  { 0x00,0x00,0x00,0xe8,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x2e,0x00,0x05,0xd7,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe8,0x00,0x00,0x00,  },
  { 0x00,0x00,0x00,0xba,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x97,0x00,0x00,0x71,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xba,0x00,0x00,0x00,  },
  { 0x00,0x00,0x00,0x64,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xef,0x14,0x00,0x00,0x05,0x08,0x18,0xee,0xff,0xff,0xff,0xff,0xff,0xff,0x64,0x00,0x00,0x00,  },
  { 0x00,0x00,0x00,0x02,0xd0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x70,0x00,0x00,0x00,0x00,0x00,0x90,0xff,0xff,0xff,0xff,0xff,0xff,0xd0,0x02,0x00,0x00,0x00,  },
  { 0x00,0x00,0x00,0x00,0x42,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xd8,0x05,0x00,0x00,0x00,0x00,0x28,0xfb,0xff,0xff,0xff,0xff,0xff,0xff,0x42,0x00,0x00,0x00,0x00,  },
  { 0x00,0x00,0x00,0x00,0x00,0xb0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x49,0x00,0x00,0x00,0x00,0x00,0xb6,0xff,0xff,0xff,0xff,0xff,0xff,0xb0,0x00,0x00,0x00,0x00,0x00,  },
};

unsigned int getPos(unsigned char x, unsigned char y)
{
  if(x%2)
  {
    y = 15-y;
  }
  return x * 16 + y;
}

unsigned int frame = 0;
unsigned int color = 0;
int centerX = 31;
int centerY = 15;

void setup() {
  unsigned char x, y;
  leds.begin();
}

#define MAX_LIGHT 4

void loop() {
  unsigned char x, y;

  /* 1st screen colorized logo */
  for (x = 0; x < 32; x++)
  {
    for (y = 0; y < 16; y++)
    {
      int index = color + ((x*2-centerX)*(x*2-centerX) + (y*2-centerY)*(y*2-centerY))/4;
      leds.setPixel(getPos(x,y),makeColor(index, 100, ((ovh[y][(x)%32]) * MAX_LIGHT ) >> 8));
    }
  }
  color = (color+1) % 360;
  frame++;
  leds.show();
}

